{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/printers/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { Printer } from \"../printer\";\nimport { Node } from \"../parser\";\n\nexport type PrintNode = {\n  tag: string;\n  attr: { [key: string]: any };\n  children: (PrintNode | string)[];\n};\n\nexport type HTMLPrinter = (\n  tag: string,\n  attr?: { [key: string]: any },\n  children?: (PrintNode | string)[],\n) => any;\n\nconst inc = (s: { key?: number }) => {\n  s.key = (s.key || 0) + 1;\n  return s.key;\n};\n\nconst delimiters: any = {\n  __: \"u\",\n  _: \"em\",\n  \"~~\": \"s\",\n  \"~\": \"em\",\n  \"**\": \"strong\",\n  \"*\": \"mark\",\n};\n\nexport function newHTMLPrinters(\n  h: HTMLPrinter,\n): {\n  [type: string]: Printer<Node, any, string | PrintNode>;\n} {\n  return {\n    text: n => n.props!.content,\n    table: (n, print, s) => h(\"table\", { key: inc(s) }, print(n.children!, s)),\n    tablehead: (n, print, s) => h(\"thead\", { key: inc(s) }, print(n.children!, s)),\n    tableheadcolumn: (n, print, s) =>\n      h(\"th\", Object.assign({}, n.props, { key: inc(s) }), print(n.children!, s)),\n    tablebody: (n, print, s) => h(\"tbody\", { key: inc(s) }, print(n.children!, s)),\n    tablerow: (n, print, s) => h(\"tr\", { key: inc(s) }, print(n.children!, s)),\n    tablecolumn: (n, print, s) => h(\"td\", { key: inc(s) }, print(n.children!, s)),\n    paragraph: (n, print, s) => h(\"p\", { key: inc(s) }, print(n.children!, s)),\n    list: (n, print, s) =>\n      h(/^\\d/.test(n.props!.bullet) ? \"ol\" : \"ul\", { key: inc(s) }, print(n.children!, s)),\n    listitem: (n, print, s) => h(\"li\", { key: inc(s) }, print(n.children!, s)),\n    link: (n, print, s) =>\n      h(\"a\", Object.assign({}, n.props, { key: inc(s) }), print(n.children!, s)),\n    image: (n, _, s) => h(\"img\", Object.assign({}, n.props, { key: inc(s) })),\n    heading: (n, print, s) => h(`h${n.props!.level}`, { key: inc(s) }, print(n.children!, s)),\n    emphasis: (n, print, s) =>\n      h(delimiters[n.props!.delimiter], { key: inc(s) }, print(n.children!, s)),\n    comment: n => `<!--${n.props!.content}-->`,\n    code: (n, _, s) =>\n      n.props!.display === \"inline\"\n        ? h(\"code\", { key: inc(s) }, [n.props!.content])\n        : h(\"pre\", { key: inc(s) }, [h(\"code\", { key: inc(s) }, [n.props!.content])]),\n    blockquote: (n, print, s) => h(\"blockquote\", { key: inc(s) }, print(n.children!, s)),\n    math: (n, _, s) => h(\"math\", { key: inc(s) }, n.props!.content),\n  };\n}\n\nexport const html = newHTMLPrinters((tag, attr = {}, children = []) => {\n  let a = \"\";\n  for (let key in attr) {\n    if (attr.hasOwnProperty(key) && key != \"id\") {\n      a += ` \"${key}\"=\"${attr[key]}\"`;\n    }\n  }\n  return `<${tag}${a}>${children.join(\"\")}</${tag}>`;\n});\n\nexport const react = newHTMLPrinters((type, data = {}, children = []) => ({\n  type,\n  key: data.key,\n  props: Object.assign({ children }, data, { key: undefined }),\n}));\n\nexport const hyperapp = newHTMLPrinters((tag, data = {}, children = []) => ({\n  tag,\n  data,\n  children,\n}));\n"]}