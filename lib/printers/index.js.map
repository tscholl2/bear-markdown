{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/printers/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { Printer } from \"../printer\";\nimport { Node } from \"../parser\";\n\nexport type PrintNode = {\n  tag: string;\n  attr: { [key: string]: any };\n  children: (PrintNode | string)[];\n};\n\nexport type HTMLPrinter = (\n  tag: string,\n  attr?: { [key: string]: any },\n  children?: (PrintNode | string)[],\n) => any;\n\nconst inc = (s: { id?: number }) => {\n  s.id = s.id || 0;\n  s.id++;\n  return s.id;\n};\n\nexport function newHTMLPrinters(\n  h: HTMLPrinter,\n): {\n  [type: string]: Printer<Node, any, string | PrintNode>;\n} {\n  return {\n    text: n => n.props!.content,\n    table: (n, output, s) => h(\"table\", { id: inc(s) }, output(n.children!)),\n    tablehead: (n, output, s) => h(\"thead\", { id: inc(s) }, output(n.children!)),\n    tableheadcolumn: (n, output, s) =>\n      h(\"th\", Object.assign({}, n.props, { id: inc(s) }), output(n.children!)),\n    tablebody: (n, output, s) => h(\"tbody\", { id: inc(s) }, output(n.children!)),\n    tablerow: (n, output, s) => h(\"tr\", { id: inc(s) }, output(n.children!)),\n    tablecolumn: (n, output, s) => h(\"td\", { id: inc(s) }, output(n.children!)),\n    paragraph: (n, output, s) => h(\"p\", { id: inc(s) }, output(n.children!)),\n    list: (n, output, s) =>\n      h(/^\\d/.test(n.props!.bullet) ? \"ol\" : \"ul\", { id: inc(s) }, output(n.children!)),\n    listitem: (n, output, s) => h(\"li\", { id: inc(s) }, output(n.children!)),\n    link: (n, output, s) => h(\"a\", Object.assign({}, n.props, { id: inc(s) }), output(n.children!)),\n    image: (n, _, s) => h(\"img\", Object.assign({}, n.props, { id: inc(s) })),\n    heading: (n, output, s) => h(`h${n.props!.level}`, { id: inc(s) }, output(n.children!)),\n    emphasis: (n, output, s) => {\n      const delimiters: any = {\n        __: \"u\",\n        _: \"em\",\n        \"~~\": \"s\",\n        \"~\": \"em\",\n        \"**\": \"strong\",\n        \"*\": \"mark\",\n      };\n      return h(delimiters[n.props!.delimiter], { id: inc(s) }, output(n.children!));\n    },\n    comment: n => `<!--${n.props!.content}-->`,\n    code: (n, _, s) =>\n      n.props!.display === \"inline\"\n        ? h(\"code\", { id: inc(s) }, n.props!.content)\n        : h(\"pre\", { id: inc(s) }, [h(\"code\", { id: inc(s) }, [n.props!.content])]),\n    blockquote: (n, output, s) => h(\"blockquote\", { id: inc(s) }, output(n.children!)),\n    math: (n, _, s) => h(\"math\", { id: inc(s) }, n.props!.content),\n  };\n}\n\nexport const html = newHTMLPrinters((tag, attr = {}, children = []) => {\n  return `<${tag}${Object.keys(attr).reduce(\n    (p, n) => p + ` \"${n}\"=\"${attr![n]}\"`,\n    \"\",\n  )}>${children.join(\"\")}</${tag}>`;\n});\n\n// export const react = newHTMLPrinters((tag, attr = {}, children = []) => {});\n"]}